# AGENTS.md
常に日本語で返答する｡
コストや時間を度外視し､最もシンプルで､最も素晴らしいものを作るよう常に努める｡
仕様は要求を実現するための最もシンプルなものを目指す｡

# 実行環境
- パッケージランナー: `bun`
- フレームワーク: Next.js (App Router)

# 作業手順
1. 指示が曖昧な場合は必ず確認する。
2. コード/設定/リポジトリ内ドキュメントを確認し、分からない点だけ質問する。
3. 疑問点が解消されたら自動で作業を開始する｡可能な限り自動で作業する｡
4. 作業は､t-wadaのTDDで行う｡
5. 作業が完了したら､biomeとtypecheckを実行してエラーが出たら直す。
6. 完了したらリファクタして､すべてのテストが通っていることを確認する｡
7. 完了したらreviewを行う｡
8. reviewが完了したらPRを作成する。
9. PRでコメントが来たら対応する｡


# 作業ルール（重要）
- UIの文言は各ロケールに合わせて翻訳する。
- 指摘された内容は自動でAGENTS.md に反映・更新する。
- 変更説明では配置（domain/service など）とファイルパスを明示する。
- 大きな編集前に方針を短く共有する。
- 検証は変更箇所に近い範囲から段階的に実施。
- useEffectはどうしても書かないとうまくいかない場合のみ書く。
- バグ修正の場合はバグの原因を特定してから､根本的な原因を変更して修正する。
- ライブラリを使用する場合はskillのcontext7を用い､公式の使い方等の裏取りをしてから実行する。
- 不要なコード､冗長なコードは削除する｡
- 実際に使わない引数・props・オプションは追加しない（将来用の予防線も不可）。必要になってから追加する。
- 厳密な型定義のため､基本的に引数は必須のものを使う｡どうしてものときは|nullで対応する。
- テスト名は自然な日本語で具体的にする（例:何をクリック/何が起きるかを明記）。
- domain/service のロジック追加・変更時は必ずテストを追加する（既存テストが十分な場合は理由を明記）。
- バグ修正の進め方:
  1. バグが再現するテストを書く
  2. コードをテストが通るまで直す
  3. テストが通ってたらpr
- バグが再現しない時は再現手順をこちらに聞く

# ドキュメント案内

このフォルダには設計・仕様・運用のドキュメントを集約しています。

## 入口

- 入口一覧は `docs/README.md#入口` を参照

# 配置ポリシー

- 近接配置: コードは「主な呼び出し元」に最も近い場所へ置く。テストはテストするファイルの横に配置する。
- 境界志向: APIで実行する処理はAPI境界の内側に、App Routeから使う補助はその境界の内側に置く。
- 凝集重視: 互いに強く関連する処理は同じスコープにまとめ、スコープ横断を避ける。

## セキュリティ/秘匿情報
- `.env` のキーは外部に出さない。ログ/PR/エラーメッセージに含めない。
- 機密値はダミー化・マスクして共有。

## 提案の仕方
- 明確な代替案がある場合のみ簡潔に提案（コスト/メリットを1行で）。
- 不確実な点は質問して前提をそろえる。
