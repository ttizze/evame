# AGENTS.md
常に日本語で返答する｡

# 開発設計ルール
## 原則
- 関心を分離して影響範囲を限定する  
- 高凝集にして内部変更を容易にする  
- 疎結合にして依存関係を減らす  
- 抽象化して変更耐性を高める  
- 非冗長にして重複を排除する
- 責務に適した具体的な命名をする 何を目的として､何が入っているのか

## 構造
- 同一関心のファイルが3件以上になった場合は専用ディレクトリを作成し階層化する  

## 実装指針
- シンプルを最優先とする  
- オーバーエンジニアリング禁止  
- 常に最小限で設計・実装する  
- ファイルの細分化を避ける。過剰な場合は統合する  
- 早期リターンを心がける
- useMemo,useCallbackは使用しない


# 実行環境
- パッケージランナー: `bun`
- フレームワーク: Next.js (App Router)


# 作業ルール（重要）
- 大きな編集や新規ファイル追加の前に方針を短く共有する。
- 検証は変更箇所に近い範囲から段階的に実施。
- useEffectはどうしても書かないとうまくいかない場合のみ書く。
- mcpのcontext7を用い､裏取りをしてから実行する。
- 不要なコードは削除する｡
- コード変更後､必ずtypecheckとbiomeを実行してエラーが出たら直す。直せない場合はチャットで相談する。

# 配置ポリシー

- 近接配置: コードは「主な呼び出し元」に最も近い場所へ置く。テストはテストするファイルの横に配置する。
- 境界志向: APIで実行する処理はAPI境界の内側に、App Routeから使う補助はその境界の内側に置く。
- 凝集重視: 互いに強く関連する処理は同じスコープにまとめ、スコープ横断を避ける。

## セキュリティ/秘匿情報
- `.env` のキーは外部に出さない。ログ/PR/エラーメッセージに含めない。
- 機密値はダミー化・マスクして共有。

## 提案の仕方
- 明確な代替案がある場合のみ簡潔に提案（コスト/メリットを1行で）。
- 不確実な点は質問して前提をそろえる。
